<!-- sessions.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sesiones</title>
  <link rel="stylesheet" href="sessions.css" />
</head>
<body>
  <header class="topbar">
    <div class="left">
      <button id="btnVolver" class="btn-link">Volver</button>
    </div>
    <div class="center">
      <h1>Sesiones</h1>
    </div>
    <div class="right"></div>
  </header>

  <main class="container">
    <section class="card">
      <h3>Filtros</h3>
      <form id="formFilter" class="grid">
        <label>Desde<input id="fFrom" type="date" /></label>
        <label>Hasta<input id="fTo" type="date" /></label>
        <label>Trabajador
          <select id="fWorker"></select>
        </label>
        <label>Cliente
          <select id="fClient"></select>
        </label>
        <div class="actions">
          <button class="primary" type="submit">Buscar</button>
          <button id="btnExport" type="button">Exportar CSV</button>
        </div>
      </form>
    </section>

    <section class="card">
      <h3>Listado</h3>
      <div class="table-wrap">
        <table class="list" id="tblSessions">
          <thead>
            <tr>
              <th>Fecha</th>
              <th>Trabajador</th>
              <th>Cliente</th>
              <th>Inicio</th>
              <th>Fin</th>
              <th>Duración</th>
              <th>Inicio (addr)</th>
              <th>Fin (addr)</th>
              <th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>
  </main>

  <dialog id="dlgEdit">
    <form id="formEdit" method="dialog" class="grid">
      <h3>Editar sesión</h3>
      <input type="hidden" id="e_id">
      <label>Fecha<input id="e_date" type="date" required></label>
      <label>Trabajador<select id="e_worker"></select></label>
      <label>Cliente<select id="e_client"></select></label>
      <label>Inicio<input id="e_start" type="datetime-local"></label>
      <label>Fin<input id="e_end" type="datetime-local"></label>
      <label>Loc. inicio (addr)<input id="e_start_addr"></label>
      <label>Loc. fin (addr)<input id="e_end_addr"></label>
      <menu>
        <button type="button" id="btnDel" class="danger">Eliminar</button>
        <button type="button" id="btnCancel">Cancelar</button>
        <button type="submit" class="primary">Guardar</button>
      </menu>
    </form>
  </dialog>

  <script src="app.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <scri
